{% extends 'waiterBase.html' %}
{% block content %}
  <h1>Client Help Requests</h1>
  
  <table>
    <thead>
      <tr>
        <th>Request ID</th>
        <th>Customer ID</th>
        <th>Message</th>
        <th>Delete?</th>
      </tr>
    </thead>
    <tbody>
      {% for help_request in help_requests %}
        <tr>
          <td>{{ help_request.requestID }}</td>
          <td>{{ help_request.customerID }}</td>
          <td>{{ help_request.message }}</td>
          <td>
            <form action="{% url 'deleteHelpRequests' %}" method="POST" onsubmit="return confirm('Are you sure you want to delete this help request?')">
              {% csrf_token %}
              <input type="hidden" name="customerID" value="{{ help_request.customerID.id }}">
              <input type="hidden" name="requestID" value="{{ help_request.requestID }}">
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <hr>

  <h2>New Help Request</h2>

  <form method="POST">
    {% csrf_token %}
    {{ help_request_form.as_p }}
    <button type="submit">Submit</button>
  </form>
{% endblock %}