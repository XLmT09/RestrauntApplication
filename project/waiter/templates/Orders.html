{% extends "waiterBase.html" %} 
{% block content %} 
{% load static %}

<script src="{% static 'javascript/confirm-deletion.js' %}" defer></script>
<link rel="stylesheet" href="{% static 'css/orderWaiter.css' %}" />
<link rel="stylesheet" href="{% static 'css/popup.css' %}" />

<div class = "background">
    <div class = "orderbox">
        <div class = "title">{{pageTitle}}</div>
        {% for order in cust_orders %}
            <div class = "order">
                <div class = "ordersummary">
                    <div class = "orderno">{{order.ID}}</div>
                </div>
                <div class = "orderdetails">
                    <select class="detailText">
                        <option disabled selected hidden>Order Details</option>
                        <option disabled>Order Placed at: {{order.timeOfOrder}}</option>
                        <option disabled></option>
                        <option disabled>Order placed by: {{order.customerID}}</option>
                        <option disabled></option>
                        <option disabled>Items Ordered:</option>
                        {% for key, value in order.orderedItems.items %}
                            <option disabled>{{key}}: x{{value}}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class = "statusbar">
                    {% if order.status == "Placed" %}
                        <button class = "updatestatus">
                        <a href="{% url 'updateStatus' order.ID %}" id="buttonText">
                        Confirm order
                        </a>
                        </button>
                        
                        <br><br>

                        <button class = "updatestatus" id = "deleteBtn" onclick = "confirmDeletion()">
                            Cancel Order
                        </button>
                    {% elif order.status == "Confirmed" %}
                        <button class = "updatestatus">
                        <a href="{% url 'updateStatus' order.ID %}" id="buttonText">
                            Mark as Delivered
                        </a>
                        </button>
                    {% elif order.status == "Delivered" %}
                        <button class = "updatestatus" id = "deleteBtn" onclick="confirmDeletion()">
                            Delete order
                        </button>
                    {% endif %}

                    <p style = "display: none;" id="confirmation">Are you sure?</p>

                    <button class = "updatestatus" style = "display: none;" id = "yes">
                        <a href="{% url 'deleteOrder' order.ID %}" id="buttonText">
                            Yes
                        </a>
                    </button>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}
