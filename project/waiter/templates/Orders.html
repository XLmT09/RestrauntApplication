{% extends "waiterBase.html" %} 
{% block content %} 
{% load static %}

<script src="{% static 'javascript/confirm-deletion.js' %}" defer></script>
<script src="{% static 'javascript/order-box.js' %}" defer></script>
<link rel="stylesheet" href="{% static 'css/orderWaiter.css' %}" />
<link rel="stylesheet" href="{% static 'css/popup.css' %}" />

<div class = "order-container">
    <div class = "title">Orders</div>
    {% for order in cust_orders %}"
        <div class = "order-box-outer" id = "{{ order.ID }}" tabindex="0" id="outer">
            <div class = "order-box-inner">
                <div class = "order-box-front">
                    <div class = "ordersummary">
                        <span class = "order-card-head">#{{order.ID}}</span>
                        <button onclick="rotate('{{ order.ID }}')" class = "view-item-btn">
                            View Orderd Items
                        </button>
                    </div>
                    <div class = "orderdetails">
                        Placed by: {{order.customerID}}
                        <br/><br/>
                        Placed at: {{order.timeOfOrder}}
                    </div>

                    <div class = "statusbar">
                        {% if order.status == "Placed" %}
                            <button class = "updatestatus">
                            <a href="{% url 'updateStatus' order.ID %}" id="buttonText">
                            Confirm order
                            </a>
                            </button>
                            
                            <br><br>

                            <button class = "updatestatus">
                            <a href="{% url 'deleteOrder' order.ID %}" id="buttonText">
                            Cancel Order
                            </a>
                            </button>
                        {% elif order.status == "Prepared" %}
                            <button class = "updatestatus">
                            <a href="{% url 'updateStatus' order.ID %}" id="buttonText">
                                Mark as Delivered
                            </a>
                            </button>
                        {% elif order.status == "Delivered" %}
                            <button class = "updatestatus">
                            <a href="{% url 'updateStatus' order.ID %}" id="buttonText">
                                Delete order
                            </a>
                            </button>
                        {% endif %}
                    </div>
                </div>
                <div class="order-box-back">
                    <div class = "ordersummary">
                        <span class = "order-card-head"> Items </span>
                        <button onclick="rotate('{{ order.ID }}')" class = "view-item-btn">
                            View Order Details
                        </button>
                    </div>
                    {% with items=order.orderedItems %}
                        {% for food, quantity in items.items %}
                            <p class="food-text">{{ food }} X {{ quantity }}</p>
                        {% endfor %}
                    {% endwith %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock content %}

